<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .ticTacToe {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            width: 300px;
            height: 300px;
            margin: 0 auto;
            border: 1px solid black;
        }

        .box {
            border: 1px solid black;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;

        }
    </style>
</head>

<body>
    <div class="ticTacToe" id="khung">
        <div class="box" title="box1"></div>
        <div class="box" title="box2"></div>
        <div class="box" title="box3"></div>
        <div class="box" title="box4"></div>
        <div class="box" title="box5"></div>
        <div class="box" title="box6"></div>
        <div class="box" title="box7"></div>
        <div class="box" title="box8"></div>
        <div class="box" title="box9"></div>
    </div>
    <h1 id="res"></h1>
    <button id="btn" style="display: none;">lam lai cuoc doi</button>
    <script>
        let boxes = document.getElementsByClassName('box');
        let arr = ['x', 'o'];

        let arr1 = ["", "", "", "", "", "", "", "", ""];
        let checkNotNull = (arr) => {
            for (let i = 0; i < arr.length; i++) {
                if (arr[i] == '') {
                    return false;
                }
            }
            return true;
        }
        function check(){
            if(checkWin(arr1)=='x'){
                res.innerHTML='x win';
                khung.style.pointerEvents='none';//khong cho click vao khung
                btn.style.display='block';

            }else if(checkWin(arr1)=='o'){
                res.innerHTML='o win';
                khung.style.pointerEvents='none';
                btn.style.display='block';
            }
            else if(checkNotNull(arr1)){
                res.innerHTML='draw';
                btn.style.display='block';
            }
           
    }
      

        for (let i = 0; i < boxes.length; i++) {
            boxes[i].addEventListener('click', () => {
                
                
                // if (checkWin(arr1) != false) {
                //     res.innerHTML = checkWin(arr1) + 'win';
                //     console.log(checkWin(arr1) + 'win');

                // }
                ticTacToe(boxes[i], i);
                console.log(arr1);
                check();
                // console.log(checkWin(arr1)+'win');




            })
        }
        let ticTacToe = (box, i) => {
            if (box.innerHTML == '') {
                box.innerHTML = arr[0];
                arr1[i] = arr[0];
                arr.reverse();

            }
        }
        // let ticTacToe2 = (box, count) => {
        //   if(count%2!=0){
        //     box.innerHTML = 'x';

        //     }else{
        //         box.innerHTML = 'o';
        //     }
        // }
        // let arr1= [[1,2,3],[4,5,6],[7,8,9]];

        // check duong thang\\ duong ngang \\ duong xeo
        // a[0][0] a[0][3] a[3][0] a[3][3]
        //    let checkEqual=(arr)=>{
        //         if(arr[0][0]==arr[0][1] && arr[0][1]==arr[0][2]){
        //             return true;
        //         }


        //    }
        // let checkWin=(arr1)=>{
        //    for(let i=0;i<3;i++){
        //         if(arr1[i]==arr1[i+1]==arr1[i+2]){
        //             console.log('win');
        //         }
        //        for(let j =i;j<2;j+3)
        //        if( arr1[i]==arr1[j+3]==arr1[j+6]){
        //            console.log('win');
        //        }

        //    }
        // }
        let checkWin = () => {
            if (arr1[0] == arr1[1] && arr1[1] == arr1[2] && arr1[0] != '') {
                return arr1[0];
            }
            if (arr1[3] == arr1[4] && arr1[4] == arr1[5] && arr1[3] != '') {
                return arr1[3];
            }
            if (arr1[6] == arr1[7] && arr1[7] == arr1[8] && arr1[6] != '') {
                return arr1[6];
            }
            if (arr1[0] == arr1[3] && arr1[3] == arr1[6] && arr1[0] != '') {
                return arr1[0];
            }
            if (arr1[1] == arr1[4] && arr1[4] == arr1[7] && arr1[1] != '') {
                return arr1[1];
            }
            if (arr1[2] == arr1[5] && arr1[5] == arr1[8] && arr1[2] != '') {
                return arr1[2];
            }
            if (arr1[0] == arr1[4] && arr1[4] == arr1[8] && arr1[0] != '') {
                return arr1[0];
            }
            if (arr1[2] == arr1[4] && arr1[4] == arr1[6] && arr1[2] != '') {
                return arr1[2];
            }
            return false;
        }
        btn.addEventListener('click',()=>{
            for(let i=0;i<boxes.length;i++){
                boxes[i].innerHTML='';
                arr1[i]='';
            }
            res.innerHTML='';
            khung.style.pointerEvents='auto';//cho click vao khung
            btn.style.display='none';
        })








    </script>
</body>

</html>